<!--A Design by W3layouts
Author: W3layout
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->

<!DOCTYPE HTML>
<html>
<head>
<title>Menú</title>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<link href="css/style.css" rel='stylesheet' type='text/css' />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<script src="js/jquery.min.js"></script>
<script type="text/javascript">
        $(document).ready(function() {
            $(".dropdown img.flag").addClass("flagvisibility");

            $(".dropdown dt a").click(function() {
                $(".dropdown dd ul").toggle();
            });
                        
            $(".dropdown dd ul li a").click(function() {
                var text = $(this).html();
                $(".dropdown dt a span").html(text);
                $(".dropdown dd ul").hide();
                $("#result").html("Selected value is: " + getSelectedValue("sample"));
            });
                        
            function getSelectedValue(id) {
                return $("#" + id).find("dt a span.value").html();
            }

            $(document).bind('click', function(e) {
                var $clicked = $(e.target);
                if (! $clicked.parents().hasClass("dropdown"))
                    $(".dropdown dd ul").hide();
            });


            $("#flagSwitcher").click(function() {
                $(".dropdown img.flag").toggleClass("flagvisibility");
            });
        });
     </script>
	 <script src="js/index.js"></script>
	 <script type="module">
		// Import the functions you need from the SDKs you need
		import { initializeApp } from "https://www.gstatic.com/firebasejs/9.2.0/firebase-app.js";
		import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.2.0/firebase-analytics.js";
		import { getFirestore,getDocs,collection,where, orderBy } from "https://www.gstatic.com/firebasejs/9.2.0/firebase-firestore.js";
		
		// TODO: Add SDKs for Firebase products that you want to use
		// https://firebase.google.com/docs/web/setup#available-libraries
	  
		// Your web app's Firebase configuration
		// For Firebase JS SDK v7.20.0 and later, measurementId is optional
		const firebaseConfig = {
		  apiKey: "AIzaSyCYuuQM8vQus29Jsq2z9ZfTijblR38I13c",
		  authDomain: "hotwingscartagena.firebaseapp.com",
		  projectId: "hotwingscartagena",
		  storageBucket: "hotwingscartagena.appspot.com",
		  messagingSenderId: "1042930989666",
		  appId: "1:1042930989666:web:7ad46b390d7998fa08af3b",
		  measurementId: "G-9CYS2LFT7C"
		};
	  		
		// Initialize Firebase
		const app = initializeApp(firebaseConfig);
		const analytics = getAnalytics(app);

		//get db connection to firebase
		const db = getFirestore(app);

		const comboxContainer = document.getElementById('combox-container');

		const querySnapshot = await getDocs(collection(db, "combos"), where("status","==","A"), orderBy("category"));

			querySnapshot.forEach((doc) => {

				//map doc to a new object
			
			const task =doc.data();
				//map task to a new object
				const combo = {
					id: doc.id,
					name: task.name,
					price: task.price,
					category: task.category,
					description: task.description,
					image: task.image,
					status: task.status,
					isNew: task.isNew,
					onSale: task.onSale,
					originalPrice: task.originalPrice
				};
			
			var newItem = 
				`<div class="col-md-4 mar-top-10">
					<a href="single.html">
						<img src="${combo.image}" class="img-responsive" alt=""/>`;

						if(combo.isNew === true){
							newItem+=`<span class="new-box">
							<span class="new-label">Nuevo</span>
							</span>`;
						}					
						if(combo.onSale === true){
							var discount = (combo.originalPrice - combo.price )/combo.originalPrice*100;
							newItem+=`<span class="sale-box">
							<span class="sale-label">-${discount} %</span>
						</span>`;
						}

					newItem += `
						<div class="shop_desc">
							<h3><a href="#">${combo.name}</a></h3>
							<p>${combo.description}</p>`;

				if(combo.onSale === true){
					newItem += 
					`<span class="reducedfrom">${combo.originalPrice}</span>
					`
				}
							
				newItem += 	`<span class="actual">${combo.price}</span><br>
							<ul class="buttons">								
								<li class="shop_btn"><a href="#">Descripción</a></li>
								<li class="cart"><a href="javascript:addToCart('${doc.id}','${combo.name}','${combo.image}','${combo.price}')">Agregar</a></li>
								<div class="clear"> </div>
							</ul>
						</div>
					</a>
				</div>`;					
				comboxContainer.innerHTML += newItem; 				
		});


	  </script>
</head>

<body>
	<div class="header">
		<div class="container">
			<div class="row">
			  <div class="col-md-12">
				 <div class="header-left">
					 <div class="logo">
						<a href="index.html"><img src="images/logo.png" alt=""/></a>
					 </div>
					 <div class="menu">
						  <a class="toggleMenu" href="#"><img src="images/nav.png" alt="" /></a>
						    <ul class="nav" id="nav">
						    	<li class="current"><a href="index.html">Menú</a></li>						    							    						    	
								<li><a href="contact.html">Contactanos</a></li>								
								<div class="clear"></div>
							</ul>	
							<script type="text/javascript" src="js/responsive-nav.js"></script>						
				    </div>							
	    		    <div class="clear"></div>
	    	    </div>
	            
				<div class="header_right">	 
					
					
				    <ul class="icon1 sub-icon1 profile_img" >

					 <li><a class="active-icon c1" href="#"> </a>

						<ul class="sub-icon1 list" >


						  <div class="product_control_buttons">
						  	<a href="#"><img src="images/edit.png" alt=""/></a>
						  		<a href="#"><img src="images/close_edit.png" alt=""/></a>
						  </div>
						   <div class="clear"></div>

						   <div  id="cart_div_id">
							
						   </div>
						  					 
						  
						  <div class="login_buttons">
							 <div class="check_button"><a href="checkout.html">Check out</a></div>
							 <div class="login_button"><a href="login.html">Login</a></div>
							 <div class="clear"></div>
						  </div>
						  <div class="clear"></div>
						</ul>
						
						
					 </li>

				   </ul>
		        <div class="clear"></div>


	       </div>

	      </div>
		 </div>
	    </div>
	  </div>
     <div class="main">
      <div class="shop_top">
		<div class="container" id="combox-container">
			
	   </div>
	  </div>
	  <div class="footer">
			<div class="container">
				<div class="row">
					<div class="col-md-3">
						<ul class="footer_box">
							<h4>Síguenos</h4>
						
							<ul class="social">	
							  <li class="facebook"><a href="https://www.facebook.com/Hot-Wings-CTG-102904348862417"><span> </span></a></li>							  
							  <li class="instagram"><a href="https://www.instagram.com/hotwingsctg"><span> </span></a></li>	
							  <li class="whatsapp"><a href="https://wa.me/message/XPI5CC3DXRLZL1"><span> </span></a></li>	
						    </ul>
		   					
						</ul>
					</div>
				</div>		
			</div>
		</div>
</body>	
</html>